\section{Gestion des notification Téléphonique : Aerogear}
\subsection{Fonctionnement des notifications Push}
\subsection{Principe d'Aerogear}
\subsection{Mise à jour d'Aerogear}
\subsection{Mise à jour des notifications}

\section{L'environnement Docker}
\subsection{Fonctionnement de Docker}
\subsection{Réalisation Docker pour le compte de Dynamease}

\section{Démarrage automatique d'un environnement de travail}

\subsection{Fonctionnalités attendues}

Ce procédé doit permettre aux développeurs de Dynamease de pouvoir mettre en place de façon rapide et automatisé, un environnement de travail complet permettant l'accès aux différents services de Dynamease. 

Il doit également être possible de pré-remplir les bases de données Dynamease, avec des données provenant de base de tests déjà utilisé ou bien d'une base de production.

L'outil ainsi créé devra pouvoir être utilisé aussi bien sur des serveurs que sur les machines locales des développeurs. 

\subsection{Étude du cahier des charges}

Les environnements utilisés par Dynamease peuvent tourner grâce à des container Docker. Pour l'outil qui sera développer, l'utilisation de ces containers sera mise en avant. Il sera donc nécessaire de déterminer l'ordre d'exécution de ces containers, en déterminant les différentes dépendance de ces containers.\\

Il faut également déterminer quels sont les meilleurs solutions pour la mise en place d'un système permettant l'intégration de données au démarrage de l'environnement Dynamease. L'environnement complet de Dynamease est constitué de plusieurs sous environnement, les différents environnement qui nécessitent d'un intégration de données sont :

\begin{itemize}
	\item La base de données MySQL;
	\item La base de données Ldap;
	\item La base de données liée à Aerogear;
	\item Les fichiers de configuration du serveur Dynamease.
\end{itemize}

Il faudra donc déterminer, pour chacun de ces environnement, quels sont les techniques permettant une intégration de données.

De plus il doit être possible de démarrer d'un environnement vide, il faudra donc gérer ce cas de figure, en initialisant les bases de données de manière à ce qu'elles soient utilisable dans l'environnement complet de Dynamease.

\subsection{Réalisation de l'outil}

\subsubsection{Détermination des dépendances}

[Mettre Diagramme pyramide]

Nous allons étudier le diagramme ci-dessus, de manière descendante. Tout en haut nous avons l'environnement Nginx, celui-ci nécessite la mise en place des environnements Tomcat et Aerogear pour fonctionner. L'environnement Tomcat aura besoin des bases de données MySQL et Ldap. 

Donc il nous faudra lancer l'environnement l'ordre suivant :

\begin{enumerate}
	\item La base de données MySQL;
	\item La base de données Ldap;
	\item Aerogear;
	\item Tomcat;
	\item Nginx.
\end{enumerate}

\subsubsection{Utilisation et Récupération des données}

On peut séparer les données à récupérer en deux catégories. Celles qui dépendent du système et celles qui n'en dépendent pas. Les données récupérer par le serveur Dynamease sont essentiellement des données de configuration. Cette configuration permet à Dynamease de connaître les adresse internet des différents services nécessaire à son fonctionnement. Ces adresses pouvant changer selon l'emplacement de démarrage de l'application Dynamease, les valeurs de ces configurations ne peuvent être prédites à l'avance. De plus le contenu des autres bases de données n'influe pas sur les valeurs de cette configuration, donc il s'agit bien là de données dépendant uniquement du système. 

Donc pour ce type de données, une variable d'environnement devra être créée par l'utilisateur afin de lui permettre de signifier à l'outil, où se situe les fichiers de configuration de Dynamease.\\

En ce qui concerne les autres données, celle-ci peuvent être stockées de la même manière. Seul leur intégration serra différente.

Il nous reste donc trois base de données à remplir avec nos fichiers de données. Leur technique d'intégration étant différente nous allons les étudier pour chaque base de données. 

[Explication schéma ?] 

Deux solutions de stockage peuvent être étudiés, on pourrait utiliser les volumes de chaque containers, en intégrant les données. Cette méthode risque d'être assez limité sachant que chaque utilisateur devra disposer des fichiers de données afin de les intégrer dans son environnement. La seconde solution serait d'utiliser une nouvelle image Docker qui aura pour rôle le stockage de tout les fichiers de données. Cette solution permettrait de pouvoir utiliser n'importe quelle base de donné sans récupérer les fichiers de données. C'est cette seconde solution que nous allons développer par la suite.

Cette solution prend en compte que le container de données contienne des volumes pour stocker les fichiers de données. Or, comme nous l'avons vu précédemment, les volumes créés des liens symboliques depuis les volumes du container vers les répertoires situés sur la machine faisant tourner le container. Donc le container serait opérationnel uniquement sur la machine l'ayant créé, si ce container se trouve sur un autre système, il se peut que les liens ne pointes sur aucuns fichiers ou sur de mauvais fichiers. 

On a également vu qu'on pouvait exécuter des commandes lors de la création du container. L'idée est d'utiliser un script de démarrage du container, qui nous servira à déplacer et trier les fichiers de données vers de nouveaux répertoires.

Grâce à cette récupération nous pouvons maintenant faire un traitement pour chaque fichier selon le type de base de données où celui-ci doit être inclue.\\

Il est aussi prévu de permettre aux utilisateurs de cet outil de lancer un environnement de travail, vide. C'est à dire seulement avec les bases de données initialisées, mais sans données. Pour cela l'image du docker de stockage des données sera généré avec les fichiers d'initialisation de chacune des bases de données. Un script de démarrage aura pour rôle de déterminer si des fichiers d'intégration de données sont présente, si c'est le cas, ces fichiers seront déplacé vers le répertoire correspondant à la base de données, sinon se seront les fichiers d'initialisation qui y seront placés. 

\subsubsection{Récupération de la version Dynamease}

Le lancement de l'environnement de travail Dynamease, doit être précisé d'un numéro de version du serveur Dynamease. 

Chaque version de Dynamease est présent sur le \textit{repository} Docker de Dynamease. Chaque nouvelle version déposé sur le serveur Git est récupérée par le serveur Jenkins. Celui-ci aura pour charge de vérifier le bon fonctionnement de la version déposée. Si celle-ci est correcte alors une nouvelle image Docker du serveur est créée avec le nom du commit comme numéro de version.

La création d'une image docker Dynamease, nécessite d'abord la compilation de l'ensemble du code source de Dynamease, de la récupération des archives (war) du serveur et enfin de leur intégration vers la nouvelle image Docker.

Le script de démarrage de l'environnement prendra en paramètre un numéro de version. Il vérifiera alors si l'image est présente en local, si ce n'est pas le cas l'image sera télécharger depuis le serveur Docker.

Grâce à cette méthode, il est possible de démarrer rapidement n'importe quel version de Dynamease.

\section{Outils d'aide à la mesure des performances}

\section{Amélioration des applications téléphoniques}

Nous allons maintenant aborder les différentes améliorations que nous devions réaliser après la réalisation de plusieurs tests de performance.

\subsection{Récupération des contacts Ios}

En début de stage un problème nous a été reporté par un utilisateur de l'application Iphone. L'application ne démarrer pas sur son Iphone. En effet tout de suite après la connexion de l'utilisateur, l'application se fermer subitement. Nous avons donc tenter de reproduire ce dysfonctionnement sur nos téléphone de test. Pourtant il nous était impossible de déterminer d'où venait l'erreur.

Nous avons donc demander le modèle d'Iphone et la version IOS de l'Iphone afin de pouvoir reproduire la procédure d'erreur dans les mêmes conditions. Mais encore une fois l'application semblait très bien fonctionner sur nos téléphone de test. Nous avons également demander à l'utilisateur de se connecter à l'aide d'un de nos téléphone de test, mais l'erreur ne s'est pas reproduite.

Nous en avons donc conclu que l'erreur devait provenir d'une configuration spéciale de l'Iphone de l'utilisateur.

Nous avons donc lister les différentes méthodes exécutée par l'application au démarrage, afin de déterminer celle qui aurait pu interagir directement avec une configuration spéciale de l'utilisateur.

[Diagramme de Mise en service de l'application]

Les différentes méthodes exécuter par l'application étaient, la récupération des informations de l'utilisateur auprès du serveur Dynamease, la récupération des contacts du portable et l'inscription sur le serveur Aerogear.

Après une observation sur les logs des serveurs Dynamease et Aerogear, nous nous sommes aperçus que les données de l'utilisateur été bien envoyé mais que le serveur Aerogear ne recevait pas de requête d'inscription.

L'erreur provenait donc de la récupération des contacts. De plus nous avons remarquer que l'utilisateur avait énormément de contact. Le problème pouvait donc provenir soit d'un contact particulier de l'utilisateur dont les informations étaient mal traitées, ou bien que le nombre important de contact faisait fermer subitement l'application.

Pour éviter de demander la liste de contacts de l'utilisateur nous avons décider en premier lieu de se pencher sur la seconde solution en créant des centaines de contact que nous importerions par la suite dans le téléphone de test. L'application arriva parfaitement à traiter ces centaines de contact.

Nous avons donc du demander la liste de contact de l'utilisateur dans le but de détecter quel était le contact qui produisait cette erreur, et quelle était la cause.

Après l'importation de ces contacts, nous avons remarqué que l'erreur se produisait également  sur les téléphones de tests. Après une observation des logs généré par l'application il est apparu qu'il existait un contact dont le nom commencé par le caractère '@'.

Les contacts dans l'application Iphone sont stocké dans un dictionnaire (ensemble clefs valeurs). Les clefs sont représenté par le noms de l'utilisateur et les valeurs sont les informations relative à l'utilisateur. La clef est donc de type chaîne de caractère. Or en Objective-C le caractère '@' est un caractère spécial. L'Iphone n'arrivant pas à interpréter ce caractère l'application ferma subitement.

Afin de régler ce type de problème, un caractère spécial '\textbackslash' est ajouté devant chaque caractère spécial pouvant être trouvé dans le nom ou les informations clients. Ce caractère à pour fonction, dans l'Objective-C de signifier à l'application de ne pas interpréter le caractère spécial qui le suit. 

\subsection{Rétrocompatibilité Ios}
\subsection{Recherche et récupération automatique des contacts}